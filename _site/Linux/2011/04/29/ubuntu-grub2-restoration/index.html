
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ubuntu下Grub2修复详细步骤</title>
    
    <meta name="author" content="dreambt">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="/">SiQi Blog</a>
		  <div class="nav-collapse">
			<ul class="nav">
			  <li><a href="/categories/Life">Life</a></li>
		      <li class="dropdown">
			    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project<b class="caret"></b></a>
			    <ul class="dropdown-menu">
				  <li class="nav-header">内容管理系统</li>
				  <li><a href="/cms4j" target="_blank">cms4j</a></li>
				  <li class="divider"></li>
				  <li class="nav-header">云相册</li>
				  <li><a href="/CloudAlbum" target="_blank">CloudAlbum</a></li>
			    </ul>
			  </li>
			  <li><a href="/contact.html">Contact</a></li>
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



            </ul>
	      </div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
		<div class="row-fluid">
			<div class="span2">
				<div class="well sidebar-nav">
					<ul class="nav nav-list">
						<li class="nav-header">文章分类</li>
						<!--
						
  						<li><a href="/categories/Linux">Linux</a></li>
  						
  						<li><a href="/categories/Cloud">Cloud</a></li>
  						
  						<li><a href="/categories/Web Design">Web Design</a></li>
  						
  						<li><a href="/categories/PHP">PHP</a></li>
  						
  						<li><a href="/categories/C">C</a></li>
  						
  						<li><a href="/categories/MQ">MQ</a></li>
  						
  						<li><a href="/categories/Ruby">Ruby</a></li>
  						
  						<li><a href="/categories/Security">Security</a></li>
  						
  						<li><a href="/categories/Matlab">Matlab</a></li>
  						
  						<li><a href="/categories/Java">Java</a></li>
  						
  						<li><a href="/categories/Windows">Windows</a></li>
  						
  						<li><a href="/categories/Algorithm">Algorithm</a></li>
  						
  						<li><a href="/categories/Android">Android</a></li>
  						
  						<li><a href="/categories/Life">Life</a></li>
  						
  						<li><a href="/categories/Design Pattern">Design Pattern</a></li>
  						
  						<li><a href="/categories/Database">Database</a></li>
  						
  						<li><a href="/categories/Other">Other</a></li>
  						
  						<li><a href="/categories/Version Control">Version Control</a></li>
  						
  						<li><a href="/categories/Test">Test</a></li>
  						
  						<li><a href="/categories/UML">UML</a></li>
  						
  						<li><a href="/categories/J2EE">J2EE</a></li>
  						
						-->
						<li><a href="/categories/Life/">Life</a></li>
						<li><a href="/categories/Java/">Java</a></li>
						<li><a href="/categories/J2EE/">J2EE</a></li>
						<li><a href="/categories/Database/">Database</a></li>
						<li><a href="/categories/Linux/">Linux</a></li>
						<li><a href="/categories/Cloud/">Cloud</a></li>
						<li><a href="/categories/Web Design/">Web Design</a></li>
						<li><a href="/categories/Algorithm/">Algorithm</a></li>
						<li><a href="/categories/Design Pattern/">Design Pattern</a></li>						
						<li><a href="/categories/Other/">Other</a></li>
						<li class="nav-header">文章归档</li>
						<li><a href="/2012/">2012</a></li>
						<li><a href="/2011/">2011</a></li>
						<li><a href="/2010/">2010</a></li>
						<li><a href="/2009/">2009</a></li>
						<li><a href="/2008/">2008</a></li>
						<li><a href="/2007/">2007</a></li>
						<li class="nav-header">博客信息</li>
						<li><a href="#">文章总数: 120 篇</a></li>
					</ul>
				</div>
			</div>
			<div class="span10">
				
<div class="hero-unit page-header">
  <h1>Ubuntu下Grub2修复详细步骤 <small>sdfdsfds</small></h1>
</div>

<div class="row-fluid">
  <div class="span9">
    <p>有没有重装双系统之后找不到启动项的经历？</p>

<p>有没有进入Grub修复模式却不知道用什么命令修复启动项？</p>

<p>好吧，看了本文也许你就会留下幸福的泪水，好吧，废话少说。</p>

<h2>一、开机提示grub&gt;或者还有Grub界面请尝试</h2>


<p>用工具盘启动，在grub菜单上按c进入命令行状态
在grub&gt;提示符下输入
grub&gt;find /boot/grub/core.img (有/boot分区的用find /grub/core.img)
系统会显示(hdx,y) (查找到的分区号），然后输入
grub&gt;root (hdx,y)
grub&gt;kernel /boot/grub/core.img (/boot分区的用 kernel /grub/core.img)
grub&gt;boot
执行boot后能转入grub2菜单，重启ubuntu后，再在ubuntu终端下执行
$sudo grub-install /dev/sda
(或sdb，sdc等，根据第几硬盘而定）修复grub
注意：如果ubuntu的启动分区使用ext4格式，要有支持ext4格式的grub才能修复</p>

<h2>二、上面的方法不可以的话，就用Live CD吧～</h2>


<p>用ubuntu9.10的liveCD试用ubuntu启动后，打开终端
假如你的ubuntu的 / 分区是sda9，又假如 /boot分区是 sda6，在终端下输入
$sudo -i
$mount /dev/sda7 /mnt
$mount /dev/sda6 /mnt/boot （如果没 /boot 单独分区这步跳过）
$grub-install --root-directory=/mnt/ /dev/sda
和前面一样，要装入第二硬盘的把sda改为sdb
修复后无法引导windows，可以用下面的方法解决：
进入ubuntu系统，打开终端，重建grub列表
$sudo update-grub
重新写入第一分区mbr
$sudo grub-install /dev/sda
如果想修改启动顺序，可以修改/boot/grub目录下的grub.cfg文件
注意此文件不可写的，先执行一下命令
$sudo chmod +w /boot/grub/grub.cfg
然后再执行
$sudo gedit /boot/grub/grub.cfg
修改，类似于grub1的menu.lst修改Grub rescue模式
rescue模式下可使用的命令有：set，ls，insmod，root，prefix(设置启动路径)
ls --列出分区
ls (hd0,8)/ --查看(hd0,8)分区根目录
找到grub目录，然后继续
grub rescue&gt;root=(hd0,x)
grub rescue&gt;prefix=/boot/grub --(grub的目录)
grub rescue&gt;set root=(hd0,x)
grub rescue&gt;set prefix=(hd0,x)/boot/grub
grub rescue&gt;insmod normal
grub&gt;normal --------若出现启动菜单，按c进入命令行模式
grub&gt;linux /boot/vmlinuz root=/dev/sdax
grub&gt;initrd /boot/initrd.img
grub&gt;boot
完成
进入系统后，更新GRUB或重装GRUB:
更新：sudo update-grub
重装：sudo grub-install /dev/xxx (这儿的xxx是sda或者sdb)</p>

<h2>三、如果还不行，不用重装系统的最后一招了</h2>


<p><strong>详细步骤1</strong></p>

<p>Boot to the LiveCD Desktop.</p>

<p>Open a terminal – Applications, Accessories, Terminal.</p>

<p>Determine your normal system partition – (the switch is a lowercase “L”)</p>

<p>sudo fdisk -l</p>

<p>If you aren’t sure, rundf -Th . Look for the correct disk size and ext3 or ext4 format.</p>

<p>Mount your normal system partition:</p>

<p>Substitute the correct partition: sda1, sdb5, etc.</p>

<p>sudo mount /dev/sdXX /mnt # Example: sudo mount /dev/sda1 /mnt</p>

<p><strong>详细步骤2</strong></p>

<p>Only if you have a separate boot partition :</p>

<p>sdYY is the /boot partition designation (examply sdb3)</p>

<p>sudo mount /dev/sdYY /mnt/boot</p>

<p>Mount devices:sudo mount --bind /dev/ /mnt/dev</p>

<p>To ensure that only the grub utilities from the LiveCD get executed, mount /usrsudo mount --bind /usr/ /mnt/usr</p>

<p>mount proc filesystemsudo mount --bind /proc/ /mnt/proc</p>

<p>Chroot into your normal system device:sudo chroot /mnt</p>

<p>If there is no /boot/grub/grub.cfg or it’s not correct, create one usingupdate-grub</p>

<p>Reinstall GRUB 2:</p>

<p>Substitute the correct device – sda, sdb, etc. Do not specify a partition number.</p>

<p>grub-install /dev/sdX</p>

<p><strong>详细步骤3</strong></p>

<p>Verify the install (use the correct device, for example sda . Do not specify a partition): sudo grub-install --recheck /dev/sdX</p>

<p>Exit chroot : CTRL-D on keyboard</p>

<p>Unmount devices:sudo umount /mnt/dev</p>

<p>If you mounted a separate /boot partition:sudo umount /mnt/boot</p>

<p>Unmount last device:sudo umount /mnt</p>

<p>Reboot.reboot</p>

<p>Post-Restoration Commands</p>

<p>Once the user can boot to a working system, try to determine why the system failed to boot.</p>

<p>The following commands may prove useful in locating and/or fixing the problem.</p>

<p><strong>详细步骤4</strong></p>

<p>To refresh the available devices and settings in /boot/grub/grub.cfg</p>

<p>sudo update-grub</p>

<p>To look for the bootloader location.</p>

<p>grub-probe -t device /boot/grub</p>

<p>To install GRUB 2 to the sdX partition’s MBR (sda, sdb, etc.)</p>

<p>sudo grub-install /dev/sdX</p>

<p>To recheck the installation. (sda, sdb, etc.) sudo grub-install --recheck /dev/sdX</p>

<p>Please check the following link for further details.</p>

    <hr>
    Liquid error: undefined method `each' for nil:NilClass
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/Algorithm/2011/04/27/md5-based-base64-algorithm" title="用MD5做散列函数的新Base64算法">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/J2EE/2011/05/02/all-levels-of-encoding-in-j2ee-system" title="J2EE系统各个层次的编码方式">Next &rarr;</a></li>
      
      </ul>
    </div>
    
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'siqiblog'; // required: replace example with your forum shortname
    var disqus_identifier = '930 http://dreambt.github.com/?p=930';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span3">
    <div class="well sidebar-nav">
	  <ul class="nav nav-list">
	    <li class="nav-header">Published</li>
		<li><div class="date"><span>2011-04-29</span></div></li>
		
		<li class="nav-header">Tags</li>
		<li><ul class="tag_box">
		  
		  


  
     
    	<li><a href="/tags.html#how-to-ref">how-to <span>14</span></a></li>
     
    	<li><a href="/tags.html#Linux-ref">Linux <span>18</span></a></li>
     
    	<li><a href="/tags.html#Ubuntu-ref">Ubuntu <span>8</span></a></li>
     
    	<li><a href="/tags.html#grub-ref">grub <span>2</span></a></li>
    
  



		  </ul></li>
		    
        <li class="nav-header">Related Posts</li>
        <li><ul class="unstyled">
	      
           <li><a href="/Linux/2011/01/16/grub-secure-ubuntu-restroe"><i class="icon-file"></i>开机显示grub secure的ubuntu启动项修复</a></li>
           
           <li><a href="/Linux/2011/11/02/install-vmware-tools-on-ubuntu-server"><i class="icon-file"></i>Install VMWare Tools on Ubuntu Server</a></li>
           
           <li><a href="/Linux/2011/10/31/ubuntu-open-ssh-service"><i class="icon-file"></i>ubuntu开启SSH服务</a></li>
           
           <li><a href="/Linux/2011/10/16/ubuntu-terminal"><i class="icon-file"></i>Ubuntu常用的终端命令</a></li>
           
           <li><a href="/Linux/2011/03/21/ubuntu-jdk"><i class="icon-file"></i>Ubuntu环境下配置JDK</a></li>
           
           <li><a href="/Linux/2011/03/02/linux-ubuntu-mount-point-presentations"><i class="icon-file"></i>Linux(Ubuntu)挂载点介绍及桌面服务器分区方案</a></li>
           
           <li><a href="/Linux/2011/01/15/ubuntu-remount-home-mount-fstab"><i class="icon-file"></i>Ubuntu重新挂载 /home （有关mount和fstab）</a></li>
           
           <li><a href="/Linux/2011/05/12/open-local-dns-cache-to-speed-up-web-browsing"><i class="icon-file"></i>开启本地DNS缓存来加速网页浏览</a></li>
           
           <li><a href="/Java/2012/03/25/how-to-write-high-quality-java-source-code"><i class="icon-file"></i>如何书写高质量的Java源代码</a></li>
           
           <li><a href="/Java/2011/11/01/java-reflection-mechanism-output-class-instance-attribute-values"><i class="icon-file"></i>利用Java反射机制输出类实例的属性值</a></li>
           
           <li><a href="/Version Control/2011/09/29/how-to-rollback-of-svn"><i class="icon-file"></i>如何对SVN进行回滚操作</a></li>
           
           <li><a href="/Windows/2011/05/18/win7-boot-process-and-restoration"><i class="icon-file"></i>Win7启动过程及启动项修复</a></li>
           
           <li><a href="/Version Control/2011/03/28/apache-svn"><i class="icon-file"></i>如何让现有的Apache服务器支持SVN</a></li>
           
           <li><a href="/Android/2011/01/08/64bit-m9-android-mobile-usb-driver"><i class="icon-file"></i>64位系统连接M9等Android手机的USB驱动修改方法</a></li>
           
           <li><a href="/Other/2010/11/06/10-programming-experience"><i class="icon-file"></i>每位开发人员都应铭记的10句编程谚语</a></li>
           
           <li><a href="/Other/2010/10/29/how-to-achievement-of-a-senior-programmer"><i class="icon-file"></i>是什么成就了一名“高级”程序员？</a></li>
           
           <li><a href="/Java/2010/10/09/how-to-package-a-java-program-as-executable-file"><i class="icon-file"></i>如何打包JAVA程序以及生成可执行文件</a></li>
           
           <li><a href="/J2EE/2009/07/11/ssh"><i class="icon-file"></i>【090711更新】SSH常见问题及解决办法</a></li>
           
           <li><a href="/Life/2009/03/21/clever-question"><i class="icon-file"></i>提问的智慧</a></li>
           
           <li><a href="/Linux/2011/08/04/linux-curl"><i class="icon-file"></i>Linux下curl命令的使用</a></li>
           
           <li><a href="/Linux/2011/05/05/overviewof-open-source-software-license"><i class="icon-file"></i>开源软件许可证总览</a></li>
           
           <li><a href="/Linux/2011/04/11/unix-timestamp"><i class="icon-file"></i>关于Unix时间戳(Unix timestamp)</a></li>
           
           <li><a href="/Linux/2010/04/02/5-open-source-license-agreement"><i class="icon-file"></i>5大开源许可协议详解</a></li>
           
           <li><a href="/Linux/2009/10/02/linux-redhat-adsl"><i class="icon-file"></i>Redhat下使用ADSL拨号上网</a></li>
           
           <li><a href="/Linux/2009/08/10/linux-gdb-debug-c"><i class="icon-file"></i>linux下用gdb调试c程序的总结</a></li>
           
           <li><a href="/Linux/2009/05/16/linux-speed-up-yum"><i class="icon-file"></i>Speed Up YUM！让Linux的升级速度快如飞</a></li>
           
           <li><a href="/Linux/2009/05/02/linux-os-file-system"><i class="icon-file"></i>Linux操作系统文件系统基础知识详解</a></li>
           
           <li><a href="/Linux/2009/04/05/rpm"><i class="icon-file"></i>RPM命令详解</a></li>
           
	       </ul></li>
  </div>
</div>


			</div>
		</div>
	</div>

	  <hr>
      <footer>
        <p>&copy; dreambt 2012</p>
      </footer>

	<script src="/assets/js/jquery-1.7.2.min.js" type="text/javascript"></script>
	<script src="/assets/themes/twitter/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    
  </body>
</html>

